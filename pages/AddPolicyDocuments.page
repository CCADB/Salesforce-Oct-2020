<!--Page is developed to use for adding multiple Policy documents. -->
<apex:page standardController="Case" sideBar="false" docType="html-5.0" extensions="AddPolicyDocumentsController" action="{!CreateAdditionalPolicyDocs}">
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <apex:slds />    
        <meta http-equiv="x-ua-compatible" content="ie=edge"/>    
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <script src="//code.jquery.com/jquery-3.3.1.js"></script>
        <style>
            table { 
                table-layout:fixed; 
            }
            table td, table th {
                word-wrap:break-word !important;
                white-space:normal !important;
            }
            .slds-button_brand {
                background-color:dimgray !important;
            }
            .slds-scope .slds-section__content table thead th {
                color: rgb(81, 79, 77);
                font-weight: 700;
                line-height: normal;
                background-color: rgb(250, 250, 249);
                font-size:14px;
            }
            .slds-scope .slds-table_cell-buffer tr>th:first-child, .slds-scope .slds-table_cell-buffer tr>td:first-child {
                padding: 0.5rem !important;
            }
            .slds {
                padding: 10px;
            }
            <!--this CSS is applied for site-->
            .slds-scope .slds-page-header {
                padding: 1rem 1rem;
                border-bottom: 1px solid rgb(221, 219, 218);
                border-radius: 0 !important;
                background: rgb(243, 242, 242);
                background-clip: border-box !important; 
                box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.10);
                border: 1px solid rgb(221, 219, 218)
            }
            .slds-scope .slds-table thead th {
                background-color: rgb(250, 250, 249);
                color: rgb(81, 79, 77);
                padding: .25rem .5rem;
                font-weight: 700;
                line-height: normal;
            }
            .slds-scope .slds-page-header__title {
                font-size: 1.125rem;
                font-weight: 700;
                line-height: 1.25;
                display: block;
            }
            .slds-scope .slds-section__title {
                border-radius: 0 !important;
                font-weight:700;
            }
            .slds-scope .slds-theme_shade, .slds-scope .slds-theme--shade {
                background-color: rgb(243, 242, 242);
            }
            .dateFormat {
                display:none;
            }
            .datePicker {
                max-width:15%;
            }
            .clsMultiPicklist select {
                width:200px !important;
                height:100px !important;
            }
            .clsPIMultiPicklist select {
                width:200px !important;
                height:265px !important;
            }
            .slds-scope .slds-dueling-list__column_responsive {
                flex-wrap: nowrap;
            }
            li.selected {
                background-color: #1589EE;
                color:white;
            }
            .slds-listbox__option_plain {
                cursor:pointer;
            }
            .deletedRecord, .deletedRecord td  {
                font-style:italic !important;
                color:red !important;
            }
        </style>
        <body>
            <!--<hr style="margin:0px;border-top: 2px solid black;"/>-->
            <apex:form id="frm">
                <div class="slds">
                    <div class="slds-grid slds-gutters">
                        <div class="slds-col slds-size_1-of-1">
                            <div class="slds-page-header">
                                <div class="slds-grid">
                                    <div class="slds-col slds-has-flexi-truncate" style="padding-left:0px;">
                                        <div class="slds-media slds-no-space slds-grow">
                                            <div class="slds-media__figure">
                                                <!-- <svg class="slds-icon slds-icon-standard-report" aria-hidden="true">
                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/standard-sprite/svg/symbols.svg#report")}"></use>
                                                </svg> -->
                                                <apex:image value="{!$Resource.CCADB}" width="150" height="80"/>
                                            </div>
                                            <div class="slds-media__body" style="margin-top: 8px;">
                                                <p class="slds-text-title--caps slds-line-height--reset">Add Policy Documents</p>
                                                <h1 class="slds-page-header__title slds-m-right--small slds-align-middle">{!objCase.CaseNumber}</h1>
                                            </div>              
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!--Body-->
                            <div id="mainbody" style="margin-top:25px;">
                                <apex:outputPanel layout="block" styleClass="slds-section slds-is-open">
                                    <apex:actionFunction action="{!EditPolicyDoc}" name="actEditPolicyDoc" reRender="frm" status="Processing" oncomplete="overridePageMessages();">
                                        <apex:param value="" name="editindex"/>
                                    </apex:actionFunction>
                                    <apex:actionFunction action="{!DeletePolicyDoc}" name="actDeletePolicyDoc" reRender="frm" status="Processing" oncomplete="overridePageMessages();">
                                        <apex:param value="" name="deleteindex"/>
                                    </apex:actionFunction>
                                    <apex:actionFunction action="{!CancelPolicyDoc}" name="actCancelPolicyDoc" reRender="frm" status="Processing" oncomplete="overridePageMessages();checkAnyInputField();">
                                        <apex:param value="" name="index"/>
                                    </apex:actionFunction>
                                    <apex:actionFunction action="{!SavePolicyDoc}" name="actSavePolicyDoc" reRender="frm" status="Processing" oncomplete="overridePageMessages();checkAnyInputField();">
                                        <apex:param value="" name="index"/>
                                    </apex:actionFunction>
                                    <apex:actionFunction action="{!EditCase}" name="actEditCase" reRender="frm" status="Processing" oncomplete="overridePageMessages();"/>
                                    <apex:actionFunction action="{!ClearCase}" name="actClearCase" reRender="frm" status="Processing" oncomplete="overridePageMessages();checkAnyInputField();"/>
                                    <apex:actionFunction action="{!SaveCase}" name="actSaveCase" reRender="frm" status="Processing" oncomplete="overridePageMessages();checkAnyInputField();"/>
                                    <center>
                                        <apex:commandButton value="Add Policy Document" rendered="{!!isError}" reRender="frm" action="{!AddNewPolicyDoc}" styleClass="slds-button slds-button_brand" oncomplete="overridePageMessages();" status="Processing" style="margin-right:3px;"/>
                                        <apex:commandButton value="Verify All Documents" rendered="{!!isError && $User.ContactId = null}" action="{!AutoUpdateRequestStatus}" reRender="frm" styleClass="slds-button slds-button_brand" oncomplete="overridePageMessages();" status="Processing" style="margin-right:3px;"/>
                                        <!--<apex:commandButton value="Save All" reRender="frm" rendered="{!!isError}" action="{!SaveChanges}" styleClass="slds-button slds-button_brand" oncomplete="overridePageMessages();" status="Processing"/>-->
                                        <apex:commandButton value="Go Back" onclick="return CancelCase();"  action="{!Cancel}" styleClass="slds-button slds-button_brand"/>
                                        <button value="Help" class="slds-button slds-button_brand btnHelp">Help</button>
                                    </center>
                                    <apex:pageMessages ></apex:pageMessages>
                                    
                                    <apex:outputPanel layout="block" rendered="{!isAnyWarning}" styleClass="slds-text-body_regular CPCPSMessageWarning" style="background-color:lightyellow;margin-top:10px;margin-bottom:10px;padding:5px;">
                                        <apex:outputPanel style="cursor:pointer;padding-right:5px;" styleClass="slds-icon_container slds-icon__svg--default">
                                            <svg class="slds-icon slds-icon-text-default" style="fill:red;" aria-hidden="true">
                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#warning")}"></use>
                                            </svg>
                                        </apex:outputPanel>
                                        <apex:outputText value="Scroll down to see the warning(s) for each Policy Document section." escape="false"></apex:outputText>
                                    </apex:outputPanel>
                                    <h3 class="slds-section__title slds-theme_shade" style="color: black;font-size:14px;background-color:lightgray;margin-top:5px;">
                                        <!--<span class="slds-icon_container slds-icon__svg--default clsExpandCollapse slds-custom-right" style="margin-left:5px;cursor:pointer;">
                                            <svg class="slds-icon slds-icon-text-default" aria-hidden="true" style="width:1.2rem;fill:black;">
                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#chevronright")}"></use>
                                            </svg>
                                        </span>-->
                                        <span style="width:50%;padding-left:10px;text-align:left;">Policy Information</span>
                                        <span style="width:50%;text-align:right;">
                                            <apex:outputPanel rendered="{!!isCaseEdit}" title="Edit" style="cursor:pointer;" styleClass="btnCaseEdit slds-icon_container slds-icon-action-edit slds-icon_container--circle">
                                                <svg class="slds-icon slds-icon--small" style="width:1rem;height:1rem;" aria-hidden="true">
                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/action-sprite/svg/symbols.svg#edit")}"></use>
                                                </svg>
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!isCaseEdit}" title="Save" style="cursor:pointer;" styleClass="btnCaseSave slds-icon_container slds-icon-action-approval slds-icon_container--circle">
                                                <svg class="slds-icon slds-icon--small" style="width:1rem;height:1rem;" aria-hidden="true">
                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/action-sprite/svg/symbols.svg#approval")}"></use>
                                                </svg>
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!isCaseEdit}" title="Cancel" style="margin-left:5px;cursor:pointer;" styleClass="btnCaseClear slds-icon_container slds-icon-action-remove slds-icon_container--circle">
                                                <svg class="slds-icon slds-icon--small" style="width:1rem;height:1rem;" aria-hidden="true">
                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/action-sprite/svg/symbols.svg#remove")}"></use>
                                                </svg>
                                            </apex:outputPanel>
                                        </span>
                                    </h3>
                                    <div aria-hidden="false" class="slds-section__content">
                                        <div class="slds-col slds-size_1-of-1">
                                            <apex:outputPanel layout="block" rendered="{!objCase.CA_Document_Repository__c == null || objCase.CA_Document_Repository__c == ''}" styleClass="slds-text-body_regular CPCPSMessageWarning"
                                                    style="background-color:lightyellow;margin-top:10px;margin-bottom:10px;padding:5px;">
                                                <apex:outputPanel style="cursor:pointer;padding-right:5px;" styleClass="slds-icon_container slds-icon__svg--default">
                                                    <svg class="slds-icon slds-icon-text-default" style="width:1.5rem;height:1.5rem;fill:red;" aria-hidden="true">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#warning")}"></use>
                                                    </svg>
                                                </apex:outputPanel>
                                                <apex:outputText value="Please enter the URL to your CA's Document Repository." escape="false"></apex:outputText>
                                            </apex:outputPanel>
                                        </div>
                                        <div class="slds-form" role="list">
                                            <div class="slds-form__row">
                                                <div class="slds-form__item" role="listitem">
                                                    <div class="slds-form-element slds-form-element_horizontal">
                                                        <span class="slds-form-element__label">CA Document Repository</span>
                                                        <div class="slds-form-element__icon">
                                                            <a href="javascript:void(0);" class="helplink">
                                                                <svg class="slds-icon slds-icon--x-small slds-icon-text-default" aria-hidden="true">
                                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#info")}"></use>
                                                                </svg>
                                                                <span class="slds-assistive-text">Help</span>
                                                            </a>
                                                        </div>
                                                        <div class="slds-form-element__control" style="padding-left:17%;">
                                                            <apex:inputHidden value="{!isCaseEdit}" id="ihEditMode" rendered="{!isCaseEdit}"/>
                                                            <apex:inputField value="{!objCase.CA_Document_Repository__c}" rendered="{!isCaseEdit}" styleClass="slds-textarea"/>
                                                            <apex:outputField value="{!objCase.CA_Document_Repository__c}" rendered="{!!isCaseEdit}" styleClass="slds-textarea"/>
                                                        </div>
                                                        <div class="help slds-popover slds-popover--tooltip slds-nubbin--bottom-left" role="tooltip" aria-live="polite" style="position:absolute;top:-78px;left:137px;width:20rem;display:none;">
                                                            <div class="slds-popover__body slds-text-longform">
                                                                <p>{!HTMLENCODE($ObjectType.Case.fields.CA_Document_Repository__c.InlineHelpText)}</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="slds-form__row">
                                                <div class="slds-form__item" role="listitem">
                                                    <div class="slds-form-element slds-form-element_horizontal">
                                                        <span class="slds-form-element__label">Policy Documentation</span>
                                                        <div class="slds-form-element__icon">
                                                            <a href="javascript:void(0);" class="helplink">
                                                                <svg class="slds-icon slds-icon--x-small slds-icon-text-default" aria-hidden="true">
                                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#info")}"></use>
                                                                </svg>
                                                                <span class="slds-assistive-text">Help</span>
                                                            </a>
                                                        </div>
                                                        <div class="slds-form-element__control" style="padding-left:17%;">
                                                            <apex:inputField value="{!objCase.Policy_Documentation__c}" rendered="{!isCaseEdit}" styleClass="slds-textarea"/>
                                                            <apex:outputField value="{!objCase.Policy_Documentation__c}" rendered="{!!isCaseEdit}" styleClass="slds-textarea"/>
                                                        </div>
                                                        <div class="help slds-popover slds-popover--tooltip slds-nubbin--bottom-left" role="tooltip" aria-live="polite" style="position:absolute;top:-60px;left:118px;width:20rem;display:none;">
                                                            <div class="slds-popover__body slds-text-longform">
                                                                <p>{!$ObjectType.Case.fields.Policy_Documentation__c.InlineHelpText}</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>                   
                                </apex:outputPanel>
                                <apex:outputPanel layout="block" styleClass="slds-section slds-is-open">
                                    <h3 class="slds-section__title slds-theme_shade" style="color: black;font-size:14px;">
                                        <span style="padding-left:10px;width:95%;color:rgb(243, 242, 242);">.</span>
                                    </h3>
                                </apex:outputPanel>
                                <apex:variable value="{!0}" var="index"/>
                                <apex:repeat value="{!lstwrapAdditionalPolicyDocs}" var="addPolicy">
                                    <div class="slds-section slds-is-open">
                                        <h3 class="slds-section__title slds-theme_shade" style="color: black;font-size:14px;background-color:lightgray;">
                                            <span style="width:50%;padding-left:10px;text-align:left;">{!if(addPolicy.additionalPolicyDoc != null && addPolicy.additionalPolicyDoc.Action__c = 'Delete', '**DELETED** ','')}Policy Document ID - {!if(addPolicy.additionalPolicyDoc.Id != null, addPolicy.additionalPolicyDoc.Name, 'New')}</span>
                                            <span style="width:50%;text-align:right;">
                                                <apex:outputPanel rendered="{!!addPolicy.isEdit && (($User.ContactId = null && addPolicy.additionalPolicyDoc.Document_Verified__c != 'Complete') || ($User.ContactId != null && addPolicy.additionalPolicyDoc.Document_Verified__c != 'Data Verified' && addPolicy.additionalPolicyDoc.Document_Verified__c != 'System Verified' && addPolicy.additionalPolicyDoc.Document_Verified__c != 'Complete'))}" 
                                                        html-data-index="{!index}" title="Edit" style="cursor:pointer;" styleClass="btnEdit slds-icon_container slds-icon-action-edit slds-icon_container--circle">
                                                    <svg class="slds-icon slds-icon--small" style="width:1rem;height:1rem;" aria-hidden="true">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/action-sprite/svg/symbols.svg#edit")}"></use>
                                                    </svg><!-- && $User.ContactId = null-->
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!!addPolicy.isEdit && addPolicy.additionalPolicyDoc.Action__c != 'Delete' && (($User.ContactId = null && addPolicy.additionalPolicyDoc.Document_Verified__c != 'Complete') || ($User.ContactId != null && addPolicy.additionalPolicyDoc.Document_Verified__c != 'Data Verified' && addPolicy.additionalPolicyDoc.Document_Verified__c != 'System Verified' && addPolicy.additionalPolicyDoc.Document_Verified__c != 'Complete'))}" 
                                                        html-data-index="{!index}" title="Delete" style="margin-left:5px;cursor:pointer;" styleClass="btnDelete slds-icon_container slds-icon-action-delete slds-icon_container--circle"
                                                        html-data-policyid="{!addPolicy.additionalPolicyDoc.Name}" html-data-dtype="{!addPolicy.additionalPolicyDoc.Document_Type__c}"
                                                        html-data-dlastdate="{!addPolicy.additionalPolicyDoc.Document_Last_Updated_Date__c}" html-data-action="{!addPolicy.additionalPolicyDoc.Action__c}"><!--&& $User.ContactId = null--> 
                                                    <svg class="slds-icon slds-icon--small" style="width:1rem;height:1rem;" aria-hidden="true">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/action-sprite/svg/symbols.svg#delete")}"></use>
                                                    </svg>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!!addPolicy.isEdit && addPolicy.additionalPolicyDoc.Action__c = 'Delete' && (($User.ContactId = null && addPolicy.additionalPolicyDoc.Document_Verified__c != 'Complete') || ($User.ContactId != null && addPolicy.additionalPolicyDoc.Document_Verified__c != 'Data Verified' && addPolicy.additionalPolicyDoc.Document_Verified__c != 'System Verified' && addPolicy.additionalPolicyDoc.Document_Verified__c != 'Complete'))}" 
                                                        html-data-index="{!index}" title="Undelete" style="margin-left:5px;cursor:pointer;" styleClass="btnDelete slds-icon_container slds-icon-action-following slds-icon_container--circle"
                                                        html-data-policyid="{!addPolicy.additionalPolicyDoc.Name}" html-data-dtype="{!addPolicy.additionalPolicyDoc.Document_Type__c}"
                                                        html-data-dlastdate="{!addPolicy.additionalPolicyDoc.Document_Last_Updated_Date__c}" html-data-action="{!addPolicy.additionalPolicyDoc.Action__c}">
                                                    <svg class="slds-icon slds-icon--small" style="width:1rem;height:1rem;" aria-hidden="true">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#undelete")}"></use>
                                                    </svg>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!addPolicy.isEdit}" html-data-index="{!index}" title="Save" style="cursor:pointer;" styleClass="btnSaveInd slds-icon_container slds-icon-action-approval slds-icon_container--circle">
                                                    <svg class="slds-icon slds-icon--small" style="width:1rem;height:1rem;" aria-hidden="true">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/action-sprite/svg/symbols.svg#approval")}"></use>
                                                    </svg>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!addPolicy.isEdit}" html-data-index="{!index}" title="Cancel" style="margin-left:5px;cursor:pointer;" styleClass="btnClear slds-icon_container slds-icon-action-remove slds-icon_container--circle">
                                                    <svg class="slds-icon slds-icon--small" style="width:1rem;height:1rem;" aria-hidden="true">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/action-sprite/svg/symbols.svg#remove")}"></use>
                                                    </svg>
                                                </apex:outputPanel>
                                            </span>
                                        </h3>
                                        <div aria-hidden="false" class="slds-section__content">
                                            <div aria-hidden="false" class="slds-section__content {!if(addPolicy.additionalPolicyDoc.Action__c != null && addPolicy.additionalPolicyDoc.Action__c == 'Delete','deletedRecord','')}">
                                                <div class="slds-col slds-size_1-of-1">
                                                    <!--<div class="slds-form__row">
                                                        <div class="slds-form__item" role="listitem">
                                                            <div class="slds-form-element slds-form-element_horizontal">
                                                                <div class="slds-text-body_regular CPCPSMessageWarning">
                                                                    <apex:outputText value="{!addPolicy.strWarnings}" escape="false"></apex:outputText>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>-->
                                                    <apex:outputPanel layout="block" rendered="{!addPolicy.strWarnings != null && addPolicy.strWarnings != ''}" styleClass="slds-text-body_regular CPCPSMessageWarning"
                                                            style="background-color:lightyellow;margin-top:10px;margin-bottom:10px;padding:5px;">
                                                        <apex:outputPanel style="cursor:pointer;padding-right:5px;" styleClass="slds-icon_container slds-icon__svg--default">
                                                            <svg class="slds-icon slds-icon-text-default" style="width:1.5rem;height:1.5rem;fill:red;" aria-hidden="true">
                                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#warning")}"></use>
                                                            </svg>
                                                        </apex:outputPanel>
                                                        <apex:outputText value="{!addPolicy.strWarnings}" escape="false"></apex:outputText>
                                                    </apex:outputPanel>
                                                </div>
                                                <div class="slds-grid">
                                                    <div class="slds-col slds-size_1-of-2">
                                                        <div class="slds-form" role="list">
                                                            <div class="slds-form__row">
                                                                <div class="slds-form__item" role="listitem">
                                                                    <div class="slds-form-element slds-form-element_horizontal">
                                                                        <span class="slds-form-element__label">Document Type</span>
                                                                        <div class="slds-form-element__icon">
                                                                            <a href="javascript:void(0);" class="helplink">
                                                                                <svg class="slds-icon slds-icon--x-small slds-icon-text-default" aria-hidden="true">
                                                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#info")}"></use>
                                                                                </svg>
                                                                                <span class="slds-assistive-text">Help</span>
                                                                            </a>
                                                                        </div>
                                                                        <div class="slds-form-element__control">
                                                                            <apex:inputHidden value="{!addPolicy.isEdit}" id="ihEditMode" rendered="{!addPolicy.isEdit}"/>
                                                                            <apex:inputField value="{!addPolicy.additionalPolicyDoc.Document_Type__c}" rendered="{!addPolicy.isEdit}" styleClass="slds-select"/>
                                                                            <apex:outputField value="{!addPolicy.additionalPolicyDoc.Document_Type__c}" rendered="{!!addPolicy.isEdit}"/>
                                                                        </div>
                                                                        <div class="help slds-popover slds-popover--tooltip slds-nubbin--bottom-left" role="tooltip" aria-live="polite" style="position:absolute;top:-40px;left:84px;width:20rem;display:none;">
                                                                            <div class="slds-popover__body slds-text-longform">
                                                                                <p>{!$ObjectType.Policy_Document_On_Case__c.fields.Document_Type__c.InlineHelpText}</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="slds-form__row">
                                                                <div class="slds-form__item" role="listitem">
                                                                    <div class="slds-form-element slds-form-element_horizontal">
                                                                        <span class="slds-form-element__label">Document Link</span>
                                                                        <div class="slds-form-element__icon">
                                                                            <a href="javascript:void(0);" class="helplink">
                                                                                <svg class="slds-icon slds-icon--x-small slds-icon-text-default" aria-hidden="true">
                                                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#info")}"></use>
                                                                                </svg>
                                                                                <span class="slds-assistive-text">Help</span>
                                                                            </a>
                                                                        </div>
                                                                        <div class="slds-form-element__control">
                                                                            <apex:inputField value="{!addPolicy.additionalPolicyDoc.Document_Link__c}" rendered="{!addPolicy.isEdit}" styleClass="slds-textarea"/>
                                                                            <apex:outputField value="{!addPolicy.additionalPolicyDoc.Document_Link__c}" rendered="{!!addPolicy.isEdit}"/>
                                                                        </div>
                                                                        <div class="help slds-popover slds-popover--tooltip slds-nubbin--bottom-left" role="tooltip" aria-live="polite" style="position:absolute;top:-115px;left:80px;width:20rem;display:none;">
                                                                            <div class="slds-popover__body slds-text-longform">
                                                                                <p>{!$ObjectType.Policy_Document_On_Case__c.fields.Document_Link__c.InlineHelpText}</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="slds-form__row">
                                                                <div class="slds-form__item" role="listitem">
                                                                    <div class="slds-form-element slds-form-element_horizontal">
                                                                        <span class="slds-form-element__label">Document Last Update Date</span>
                                                                        <div class="slds-form-element__icon">
                                                                            <a href="javascript:void(0);" class="helplink">
                                                                                <svg class="slds-icon slds-icon--x-small slds-icon-text-default" aria-hidden="true">
                                                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#info")}"></use>
                                                                                </svg>
                                                                                <span class="slds-assistive-text">Help</span>
                                                                            </a>
                                                                        </div>
                                                                        <div class="slds-form-element__control">
                                                                            <apex:inputField value="{!addPolicy.additionalPolicyDoc.Document_Last_Updated_Date__c}" rendered="{!addPolicy.isEdit}" styleClass="slds-input"/>
                                                                            <apex:outputField value="{!addPolicy.additionalPolicyDoc.Document_Last_Updated_Date__c}" rendered="{!!addPolicy.isEdit}"/>
                                                                        </div>
                                                                        <div class="help slds-popover slds-popover--tooltip slds-nubbin--bottom-left" role="tooltip" aria-live="polite" style="position:absolute;top:-60px;left:154px;width:20rem;display:none;">
                                                                            <div class="slds-popover__body slds-text-longform">
                                                                                <p>{!$ObjectType.Policy_Document_On_Case__c.fields.Document_Last_Updated_Date__c.InlineHelpText}</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="slds-form__row">
                                                                <div class="slds-form__item" role="listitem">
                                                                    <div class="slds-form-element slds-form-element_horizontal">
                                                                        <span class="slds-form-element__label">Associated Trust Bits</span>
                                                                        <div class="slds-form-element__icon">
                                                                            <a href="javascript:void(0);" class="helplink">
                                                                                <svg class="slds-icon slds-icon--x-small slds-icon-text-default" aria-hidden="true">
                                                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#info")}"></use>
                                                                                </svg>
                                                                                <span class="slds-assistive-text">Help</span>
                                                                            </a>
                                                                        </div>
                                                                        <div class="slds-form-element__control">
                                                                            <apex:outputField value="{!addPolicy.additionalPolicyDoc.Associated_Trust_Bits__c}" rendered="{!!addPolicy.isEdit}"/>
                                                                            <apex:outputPanel layout="block" id="divTrustBitsMultiPicklist" rendered="{!addPolicy.isEdit}"  styleClass="clsMultiPicklist">
                                                                                <div class="slds-picklist--draggable slds-grid" id="divTrustBitsWrapper" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
                                                                                    <table style="border-spacing:0px !important;border:none;">
                                                                                        <tr>
                                                                                            <td style="border:none;width:45%;">
                                                                                                <apex:outputPanel layout="block" styleClass="slds-form-element__control" id="divTrustBitsLeft">
                                                                                                </apex:outputPanel>
                                                                                            </td>
                                                                                            <td style="border:none;width:10%;">
                                                                                                <div layout="block" class="slds-grid slds-grid--vertical" id="divTrustBitsButtons">
                                                                                                    <button class="slds-button slds-button--icon-container btnTempClickRightclass" style="margin-top:0px;margin-left:10%" data-pickid="{!$Component.TrustBitsPicklist}">
                                                                                                        <svg aria-hidden="true" class="slds-button__icon">
                                                                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#right')}"></use>
                                                                                                        </svg>
                                                                                                        <span class="slds-assistive-text">Arrow up</span>
                                                                                                    </button>
                                                                                                    <button class="slds-button slds-button--icon-container btnTempClickLeftclass" style="margin-left:10%" data-pickid="{!$Component.TrustBitsPicklist}">
                                                                                                        <svg aria-hidden="true" class="slds-button__icon">
                                                                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#left')}"></use>
                                                                                                        </svg>
                                                                                                        <span class="slds-assistive-text">Arrow down</span>
                                                                                                    </button>
                                                                                                </div>
                                                                                            </td>
                                                                                            <td style="border:none;width:45%;">
                                                                                                <apex:outputPanel layout="block" styleClass="slds-form-element__control" id="divTrustBitsRight">
                                                                                                </apex:outputPanel>
                                                                                            </td>
                                                                                        </tr>
                                                                                    </table>
                                                                                </div>
                                                                
                                                                                <apex:outputPanel layout="block" styleClass="slds-form-element__control" id="divTrustBitsCWrapper">
                                                                                    <apex:inputField id="TrustBitsPicklist"  value="{!addPolicy.additionalPolicyDoc.Associated_Trust_Bits__c}" styleclass="slds-select"/>
                                                                                </apex:outputPanel>
                                                                
                                                                                <script type="text/javascript">
                                                                                    var divSelWrapper = document.getElementById("{!$Component.divTrustBitsCWrapper}");
                                                                                    var selList = divSelWrapper.getElementsByTagName("select");
                                                                                    var selId = selList[0].id;
                                                                
                                                                
                                                                                    var selLeft = selList[1];
                                                                                    var selRight = selList[2];
                                                                                    // Re-parent select controls for LEX support
                                                                                    document.getElementById("{!$Component.divTrustBitsLeft}").appendChild(selLeft);
                                                                                    document.getElementById("{!$Component.divTrustBitsRight}").appendChild(selRight);
                                                                
                                                                                    // Take away the "optgroup" because the VF render issue
                                                                                    selLeft.innerHTML = selLeft.getElementsByTagName("optgroup")[0].innerHTML;
                                                                                    selRight.innerHTML = selRight.getElementsByTagName("optgroup")[0].innerHTML;
                                                                
                                                                                    // Remove unused HTML elments
                                                                                    divSelWrapper.removeChild(divSelWrapper.getElementsByTagName("table")[0]);
                                                                
                                                                                </script>
                                                                            </apex:outputPanel>
                                                                            <!--<apex:inputField value="{!addPolicy.additionalPolicyDoc.Associated_Trust_Bits__c}" styleClass="slds-input"/>-->
                                                                        </div>
                                                                        <div class="help slds-popover slds-popover--tooltip slds-nubbin--bottom-left" role="tooltip" aria-live="polite" style="position:absolute;top:-43px;left:109px;width:20rem;display:none;">
                                                                            <div class="slds-popover__body slds-text-longform">
                                                                                <p>{!$ObjectType.Policy_Document_On_Case__c.fields.Associated_Trust_Bits__c.InlineHelpText}</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                
                                                            </div>
                                                            <div class="slds-form__row">
                                                                <div class="slds-form__item" role="listitem">
                                                                    <div class="slds-form-element slds-form-element_horizontal">
                                                                        <span class="slds-form-element__label">Comments</span>
                                                                        <div class="slds-form-element__control">
                                                                            <apex:inputField value="{!addPolicy.additionalPolicyDoc.Comments__c}" rendered="{!addPolicy.isEdit}" styleClass="slds-textarea"/>
                                                                            <apex:outputField value="{!addPolicy.additionalPolicyDoc.Comments__c}" rendered="{!!addPolicy.isEdit}"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-col slds-size_1-of-2">
                                                        <div class="slds-form" role="list">
                                                            <div class="slds-form__row">
                                                                <div class="slds-form__item" role="listitem">
                                                                    <div class="slds-form-element slds-form-element_horizontal">
                                                                        <span class="slds-form-element__label">
                                                                            Policy Identifiers
                                                                        </span>
                                                                        <div class="slds-form-element__icon">
                                                                            <a href="javascript:void(0);" class="helplink">
                                                                                <svg class="slds-icon slds-icon--x-small slds-icon-text-default" aria-hidden="true">
                                                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#info")}"></use>
                                                                                </svg>
                                                                                <span class="slds-assistive-text">Help</span>
                                                                            </a>
                                                                        </div>
                                                                        <div class="slds-form-element__control" style="padding-left:30%;">
                                                                            <apex:outputField value="{!addPolicy.additionalPolicyDoc.Policy_Identifiers__c}" rendered="{!!addPolicy.isEdit}"/>
                                                                            <apex:outputPanel layout="block" rendered="{!addPolicy.isEdit}" style="height:14rem;"  styleClass="slds-dueling-list">
                                                                                <div class="slds-dueling-list__column slds-dueling-list__column_responsive pi_left">
                                                                                    <span class="slds-form-element__label">Available</span>
                                                                                    <div class="slds-dueling-list__options" style="height:14rem;">
                                                                                        <ul aria-describedby="option-drag-label" aria-multiselectable="true" class="slds-listbox slds-listbox_vertical pi_unselected" role="listbox">
                                                                                            <apex:repeat value="{!lstPolicyIdentifiers}" var="PI">
                                                                                                <apex:variable value="{!0}" var="isExist"/>
                                                                                                <apex:repeat value="{!addPolicy.lstdocPolicyIdentifiers}" var="DocPI">
                                                                                                    <apex:variable value="{!isExist+1}" var="isExist" rendered="{!DocPI == PI}"/>
                                                                                                </apex:repeat>
                                                                                                <li role="presentation" class="slds-listbox__item" value="{!PI}" style="display:{!if(isExist==0, '','none')}">
                                                                                                    <div class="slds-listbox__option_plain slds-media slds-media_small slds-media_inline" aria-selected="false" draggable="true" role="option" tabindex="0">
                                                                                                        <span class="slds-media__body">
                                                                                                            <span class="slds-truncate" title="{!PI}">{!PI}</span>
                                                                                                        </span>
                                                                                                    </div>
                                                                                                </li>
                                                                                            </apex:repeat>
                                                                                        </ul>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="slds-dueling-list__column">
                                                                                    <button class="slds-button slds-button_icon slds-button_icon-container btnPIRight" style="margin-top:5.5rem;">
                                                                                        <svg aria-hidden="true" class="slds-button__icon">
                                                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#right')}"></use>
                                                                                        </svg>
                                                                                        <span class="slds-assistive-text"></span>
                                                                                    </button>
                                                                                    <button class="slds-button slds-button_icon slds-button_icon-container btnPILeft">
                                                                                        <svg aria-hidden="true" class="slds-button__icon">
                                                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#left')}"></use>
                                                                                        </svg>
                                                                                        <span class="slds-assistive-text"></span>
                                                                                    </button>
                                                                                </div>
                                                                                <div class="slds-dueling-list__column slds-dueling-list__column_responsive pi_right">
                                                                                    <span class="slds-form-element__label">Selected</span>
                                                                                    <div class="slds-dueling-list__options" style="height:14rem;">
                                                                                        <apex:inputHidden value="{!addPolicy.additionalPolicyDoc.Policy_Identifiers__c}" id="ihPolicyIdentifiers"/>
                                                                                        <ul aria-describedby="option-drag-label" aria-multiselectable="true" class="slds-listbox slds-listbox_vertical pi_selected" role="listbox">
                                                                                            <apex:repeat value="{!addPolicy.lstdocPolicyIdentifiers}" var="PI">
                                                                                                <li role="presentation" class="slds-listbox__item" value="{!PI}">
                                                                                                    <div class="slds-listbox__option slds-listbox__option_plain slds-media slds-media_small slds-media_inline" aria-selected="false" draggable="true" role="option" tabindex="0">
                                                                                                        <span class="slds-media__body">
                                                                                                            <span class="slds-truncate" title="{!PI}">{!PI}</span>
                                                                                                        </span>
                                                                                                    </div>
                                                                                                </li>
                                                                                            </apex:repeat>
                                                                                        </ul>
                                                                                    </div>
                                                                                </div>
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                        <div class="help slds-popover slds-popover--tooltip slds-nubbin--bottom-left" role="tooltip" aria-live="polite" style="position:absolute;top:-43px;left:88px;width:20rem;display:none;">
                                                                            <div class="slds-popover__body slds-text-longform">
                                                                                <p>{!$ObjectType.Policy_Document_On_Case__c.fields.Policy_Identifiers__c.InlineHelpText}</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="slds-form__row">
                                                                <div class="slds-form__item" role="listitem">
                                                                    <div class="slds-form-element slds-form-element_horizontal">
                                                                        <span class="slds-form-element__label">Additional Policy Identifiers</span>
                                                                        <div class="slds-form-element__icon">
                                                                            <a href="javascript:void(0);" class="helplink">
                                                                                <svg class="slds-icon slds-icon--x-small slds-icon-text-default" aria-hidden="true">
                                                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#info")}"></use>
                                                                                </svg>
                                                                                <span class="slds-assistive-text">Help</span>
                                                                            </a>
                                                                        </div>
                                                                        <div class="slds-form-element__control" style="padding-left:30%;">
                                                                            <apex:inputField value="{!addPolicy.additionalPolicyDoc.Additional_Policy_Identifiers__c}" rendered="{!addPolicy.isEdit}" styleClass="slds-textarea"/>
                                                                            <apex:outputField value="{!addPolicy.additionalPolicyDoc.Additional_Policy_Identifiers__c}" rendered="{!!addPolicy.isEdit}"/>
                                                                        </div>
                                                                        <div class="help slds-popover slds-popover--tooltip slds-nubbin--bottom-left" role="tooltip" aria-live="polite" style="position:absolute;top:-60px;left:105px;width:20rem;display:none;">
                                                                            <div class="slds-popover__body slds-text-longform">
                                                                                <p>{!$ObjectType.Policy_Document_On_Case__c.fields.Additional_Policy_Identifiers__c.InlineHelpText}</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="slds-form__row">
                                                                <div class="slds-form__item" role="listitem">
                                                                    <div class="slds-form-element slds-form-element_horizontal">
                                                                        <span class="slds-form-element__label">Document Verified?</span>
                                                                        <div class="slds-form-element__icon">
                                                                            <a href="javascript:void(0);" class="helplink">
                                                                                <svg class="slds-icon slds-icon--x-small slds-icon-text-default" aria-hidden="true">
                                                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#info")}"></use>
                                                                                </svg>
                                                                                <span class="slds-assistive-text">Help</span>
                                                                            </a>
                                                                        </div>
                                                                        <div class="slds-form-element__control" style="padding-left:30%;">
                                                                            <apex:inputField value="{!addPolicy.additionalPolicyDoc.Document_Verified__c}" rendered="{!addPolicy.isEdit  && $User.ContactId = null}" styleClass="slds-textarea"/>
                                                                            <apex:outputField value="{!addPolicy.additionalPolicyDoc.Document_Verified__c}" rendered="{!!addPolicy.isEdit || $User.ContactId != null}"/>
                                                                        </div>
                                                                        <div class="help slds-popover slds-popover--tooltip slds-nubbin--bottom-left" role="tooltip" aria-live="polite" style="position:absolute;top:-60px;left:105px;width:20rem;display:none;">
                                                                            <div class="slds-popover__body slds-text-longform">
                                                                                <p>{!$ObjectType.Policy_Document_On_Case__c.fields.Document_Verified__c.InlineHelpText}</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <apex:outputPanel layout="block" styleClass="slds-section slds-is-close" style="margin-left:10px;margin-right:10px;">
                                                    <h3 class="slds-section__title slds-theme_shade" style="color: black;font-size:14px;">
                                                        <span class="slds-icon_container slds-icon__svg--default clsExpandCollapse slds-custom-right" style="margin-left:5px;cursor:pointer;">
                                                            <svg class="slds-icon slds-icon-text-default" aria-hidden="true" style="width:1.2rem;fill:black;">
                                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#chevronright")}"></use>
                                                            </svg>
                                                        </span>
                                                        <apex:outputPanel rendered="{!!addPolicy.isEdit}">Applicable root certificates (Number Selected: {!addPolicy.countRootCerts})</apex:outputPanel>
                                                        <apex:outputPanel rendered="{!addPolicy.isEdit}">Select applicable root certificates (Number previously selected and saved: {!addPolicy.countRootCerts})</apex:outputPanel>
                                                    </h3>
                                                    <div aria-hidden="false" class="slds-section__content slds-hide">
                                                        <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_col-bordered">
                                                            <thead>
                                                                <tr class="slds-line-height_reset">
                                                                    <th width="5%" scope="col" style="border-left: 1px solid rgb(221, 219, 218);text-align:center;">
                                                                        <div class="slds-checkbox">
                                                                            <apex:inputCheckbox id="chkSelectAll" styleClass="clsSelectAll" disabled="{!!addPolicy.isEdit}"/>
                                                                            <label class="slds-checkbox__label" for="{!$Component.chkSelectAll}">
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-form-element__label"></span>
                                                                            </label>
                                                                        </div>
                                                                    </th>
                                                                    <th width="20%" scope="col">
                                                                        <div  title="Root Certificate Name">Root Certificate Name</div>
                                                                    </th>
                                                                    <th width="10%" scope="col">
                                                                        <div  title="Mozilla Status">Mozilla Status</div>
                                                                    </th>
                                                                    <th width="10%" scope="col">
                                                                        <div  title="Microsoft Status">Microsoft Status</div>
                                                                    </th>
                                                                    <th width="10%" scope="col">
                                                                        <div  title="Valid From (GMT)">Valid From (GMT)</div>
                                                                    </th>
                                                                    <th width="10%" scope="col">
                                                                        <div  title="Valid To (GMT)">Valid To (GMT)</div>
                                                                    </th>
                                                                    <th width="25%" scope="col" style="border-right: 1px solid rgb(221, 219, 218);">
                                                                        <div  title="SHA 256 Fingerprint">SHA 256 Fingerprint</div>
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <apex:repeat value="{!addPolicy.lstApplyPolicyDocs}" var="applyPolicy">
                                                                    <tr class="dataRow {!if(applyPolicy.objApplyPolicyDoc.Id != null && applyPolicy.objApplyPolicyDoc.Action__c = 'Delete','deletedRecord','')}">
                                                                        <td style="border-left: 1px solid rgb(221, 219, 218);text-align:center;">
                                                                            <div class="slds-checkbox">
                                                                                <apex:inputCheckbox id="chkApplyPolicy" value="{!applyPolicy.isSelected}" disabled="{!!addPolicy.isEdit}"/>
                                                                                <label class="slds-checkbox__label" for="{!$Component.chkApplyPolicy}">
                                                                                    <span class="slds-checkbox_faux"></span>
                                                                                    <span class="slds-form-element__label"></span>
                                                                                </label>
                                                                            </div>
                                                                        </td>
                                                                        <td class="datacell">
                                                                            <apex:outputField value="{!applyPolicy.objAcc.Name}"/>
                                                                        </td>
                                                                        <td class="datacell">
                                                                            <apex:outputField value="{!applyPolicy.objAcc.Status__c}"/>
                                                                        </td>
                                                                        <td class="datacell">
                                                                            <apex:outputField value="{!applyPolicy.objAcc.Microsoft_Status__c}"/>
                                                                        </td>
                                                                        <td class="datacell">
                                                                            <apex:outputField value="{!applyPolicy.objAcc.Valid_From_GMT__c}"/>
                                                                        </td>
                                                                        <td class="datacell">
                                                                            <apex:outputField value="{!applyPolicy.objAcc.Valid_To_GMT__c}"/>
                                                                        </td>
                                                                        <td class="datacell" style="border-right: 1px solid rgb(221, 219, 218);">
                                                                            <apex:outputField value="{!applyPolicy.objAcc.SHA_256_Fingerprint__c}"/>
                                                                        </td>
                                                                    </tr>
                                                                </apex:repeat>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                    </div>
                                    <apex:variable value="{!index+1}" var="index"/>
                                </apex:repeat>
                                <apex:pageMessages rendered="{!objCase.Root_Cases__r.size > 0}"></apex:pageMessages>  
                                <center>
                                    <apex:commandButton value="Add Policy Document" rendered="{!!isError}" action="{!AddNewPolicyDoc}" reRender="frm" styleClass="slds-button slds-button_brand" oncomplete="overridePageMessages();" status="Processing" style="margin-right:3px;"/>
                                    <!--<apex:commandButton value="Save All" action="{!SaveChanges}" rendered="{!!isError}" reRender="frm" styleClass="slds-button slds-button_brand" oncomplete="overridePageMessages();" status="Processing"/>-->
                                    <apex:commandButton value="Verify All Documents" rendered="{!!isError && $User.ContactId = null}" action="{!AutoUpdateRequestStatus}" reRender="frm" styleClass="slds-button slds-button_brand" oncomplete="overridePageMessages();" status="Processing" style="margin-right:3px;"/>
                                    <apex:commandButton value="Go Back" onclick="return CancelCase();" action="{!Cancel}" styleClass="slds-button slds-button_brand"/>
                                    <button value="Help" class="slds-button slds-button_brand btnHelp">Help</button>
                                </center>
                            </div>
                        </div>
                    </div>
                    <!-- model popup-->
                    <div id="divHelpBox" style="display:none">
                        <section role="dialog" aria-modal="true" class="slds-modal slds-fade-in-open">
                            <div class="slds-modal__container">
                                <header class="slds-modal__header">
                                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse btnHelpClose" title="Close">
                                        <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#close")}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Close</span>
                                    </button>
                                    <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Help</h2>
                                </header>
                                <div class="slds-modal__content slds-p-around_medium">
                                    <!----- HELP TEXT HERE ----->
                                    <ul style="list-style-type:disc;padding-left:20px;">
                                        <li> 
                                            If you see an error that says Please add Root Cases then click on the 
                                            Go Back button, and click on the Add/Update Root Cases button to 
                                            indicate which root certificates this Case is for. 
                                        </li> 
                                        <ul style="list-style-type:circle;padding-left:40px;">
                                            <li> 
                                                The initial list of documents is pre-filled based on the current 
                                                document information for root certificates you indicate 
                                                are relevant to this Case.
                                            </li> 
                                        </ul>
                                        <li> 
                                           To update information in each section of this page, click on the green
                                           icon with the pencil. In edit mode for a Policy Document section you 
                                           will be able to change:
                                        </li> 
                                        <ul style="list-style-type:circle;padding-left:40px;">
                                            <li>
                                                Document Type -- CP, CPS, CP/CPS, Other
                                            </li> 
                                            <li>
                                                Document Link  -- URL to the PDF of the document on the CAs website
                                            </li>
                                            <li>
                                                Document Last Update Date
                                            </li>
                                            <li>
                                                Associated Trust Bits
                                            </li>
                                            <ul style="list-style-type:lower-roman;padding-left:40px;">
                                               <li>
                                                   Double click on a trust bit to quickly add it
                                               </li>
                                            </ul>             
                                            <li>
                                                IMPORTANT: Click on > Select applicable root certificates to indicate 
                                                which root certificates / hierarchies the document is for.
                                            </li>
                                                Comments
                                            <li>
                                                Policy Identifiers -- OIDs associated with the document
                                            </li>
                                            <ul style="list-style-type:lower-roman;padding-left:40px;">
                                               <li>
                                                   Double-click on an OID to quickly add it
                                               </li>
                                               <li>
                                                   Click on multiple OIDs then the arrow to add many at once
                                               </li>
                                            </ul>   
                                            <li>
                                               Addition Policy Identifiers -- OIDs not yet know to CCADB 
                                               that are associated with the document
                                            </li>
                                        </ul>
                                        <li> 
                                           To add a new document, click on the 'Add Policy Document' button
                                           then fill in the information as described above.
                                        </li> 
                                        <li> 
                                           Save your changes in a section by clicking on the green icon with the checkmark.
                                        </li> 
                                        <li> 
                                           Cancel your changes in a section by clicking on the blue icon with the X.
                                        </li> 
                                        <li> 
                                           To indicate that a Policy Document object should be deleted, click on the 
                                           red icon with the trash can. It will be marked **DELETED** to indicate 
                                           that the document object will be deleted when the root store operator 
                                           processes the case.
                                        </li> 
                                        <ul style="list-style-type:circle;padding-left:40px;">
                                            <li> 
                                                Cancel deletion of a Policy Document by clicking on the light green icon 
                                                with the trash can containing a circular arrow.
                                            </li> 
                                        </ul>                                        
                                    </ul>
                                </div>
                                <footer class="slds-modal__footer">
                                    <button class="slds-button slds-button_neutral btnHelpClose">Close</button>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </div>
                </div>
                <script>
                </script>
            </apex:form>
            <script>
                var isAnyValueChanged = false;
                $(document).on("change", "input, select, textarea", function () {
                    isAnyValueChanged = true;
                });
                function checkAnyInputField(){
                    if(isAnyValueChanged){
                        let len = $("input[id$=ihEditMode]").length;
                        if(len <= 0){
                            isAnyValueChanged = false;
                        }
                    }
                }
                function CancelCase(){
                    if(isAnyValueChanged){
                        var message = 'Please click on the green checkmark at the top of each Policy Document section to save your changes.\n\nClick on Cancel to return and save your changes.\n\nOnly click on OK if you want your changes to be discarded.';
                        if(confirm(message)){
                            return true;
                        } else {
                            return false;
                        }
                    }
                    return true;
                }
                $(document).on('mouseenter','.helplink',function(){
                    $(this).closest('div.slds-form-element').find('div.help').show();
                });
                $(document).on('mouseleave','.helplink',function(){
                    $(this).closest('div.slds-form-element').find('div.help').hide();
                });
                $(document).on('click','.btnHelp',function(){
                    $('#divHelpBox').show();
                    return false;
                });
                $(document).on('click','.btnHelpClose',function(){
                    $('#divHelpBox').hide();
                    return false;
                });
                
                $(document).on('click','.btnEdit', function(){
                    var index = $(this).attr('data-index');
                    actEditPolicyDoc(index);
                });
                $(document).on('click','.btnClear', function(){
                    var index = $(this).attr('data-index');
                    actCancelPolicyDoc(index);
                });
                $(document).on('click','.btnSaveInd', function(){
                    var index = $(this).attr('data-index');
                    actSavePolicyDoc(index);
                });
                
                
                $(document).on('click','.btnDelete', function(){
                    let datapolicyid = $(this).attr('data-policyid');
                    let datadtype = $(this).attr('data-dtype');
                    let datadlastdate = $(this).attr('data-dlastdate');
                    let dataaction = $(this).attr('data-action');
                    let message = '';
                    if(dataaction != undefined && dataaction != '' && dataaction == 'Delete'){
                        message = 'Are you sure you want to UNDELETE?';
                    } else {
                        message = 'Are you sure you want to delete?';
                    }
                    if(datapolicyid != undefined && datapolicyid != ''){
                        message += '\nPolicy Document Id: ' + datapolicyid;
                    }
                    if(datadtype != undefined && datadtype != ''){
                        message += '\nDocument Type: ' + datadtype;
                    }
                    if(datadlastdate != undefined && datadlastdate != ''){
                        let dtlastdate = new Date(datadlastdate);
                        message += '\nDocument Last Update Date: ' + dtlastdate.toLocaleDateString();
                    }
                    if(confirm(message)){
                        var index = $(this).attr('data-index');
                        actDeletePolicyDoc(index);
                    }
                });
                $(document).on('click','.btnCaseEdit', function(){
                    actEditCase();
                });
                $(document).on('click','.btnCaseSave', function(){
                    actSaveCase();
                });
                $(document).on('click','.btnCaseClear', function(){
                    actClearCase();
                });
                
                $(document).on('click','.clsSelectAll',function(e){
                    $(this).closest('table').find('tbody').find('td input:checkbox').prop('checked', this.checked);
                });
                $(document).on('click','.clsExpandCollapse',function(){
                    var downarrow = '<svg class="slds-icon slds-icon-text-default" aria-hidden="true" style="width:1.2rem;fill:black;margin-right:3px;">\
                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#chevrondown")}"></use> \
                                            </svg>';
                    var rightarrow = '<svg class="slds-icon slds-icon-text-default" aria-hidden="true" style="width:1.2rem;fill:black;">\
                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#chevronright")}"></use> \
                                            </svg>';
                    
                    var selected = false;
                    if($(this).hasClass('slds-custom-down')){
                        selected = true;
                    }
                    if(selected == false){
                        $(this).removeClass('slds-custom-right').addClass('slds-custom-down');
                        $(this).html('');
                        $(this).html(downarrow);
                        $(this).closest('div.slds-section').removeClass('slds-is-close').addClass('slds-is-open');
                        $(this).closest('div.slds-section').find('div.slds-section__content').removeClass('slds-hide').addClass('slds-show');
                    } else {
                        $(this).removeClass('slds-custom-down').addClass('slds-custom-right');
                        $(this).html('');
                        $(this).html(rightarrow);
                        $(this).closest('div.slds-section').removeClass('slds-is-open').addClass('slds-is-close');
                        $(this).closest('div.slds-section').find('div.slds-section__content').removeClass('slds-show').addClass('slds-hide');
                    }
                });
                $(document).on('click', '.btnTempClickRightclass', function(){
                    var tmpid = $(this).attr('data-pickid');
                    MultiSelectPicklist.handleMSPSelect(tmpid);
                    isAnyValueChanged = true;
                    return false;
                });
                
                $(document).on('click', '.btnTempClickLeftclass', function(){
                    var tmpid = $(this).attr('data-pickid');
                    MultiSelectPicklist.handleMSPUnSelect(tmpid);
                    isAnyValueChanged = true;
                    return false;
                });
                
                $(document).on('click', '.btnPIRight', function(){
                    var piSelected = $(this).closest('.slds-dueling-list').find('.pi_selected');
                    $(this).closest('.slds-dueling-list').find('.pi_left').find('ul').find('li.selected').each(function(){
                        $(this).removeClass('selected');
                        piSelected.append($(this));
                        piSelected.find('li').sort(function (a, b) {
                            return ($(b).text().toUpperCase()) < ($(a).text().toUpperCase()) ? 1 : -1;
                        }).appendTo(piSelected);
                    });
                    //set value
                    var selectedPI = '';
                    $(this).closest('.slds-dueling-list').find('.pi_selected').find('li').each(function(){
                        if(selectedPI != null && selectedPI.length > 0) {
                            selectedPI += '; ' + $.trim($(this).text());
                        } else {
                            selectedPI += $.trim($(this).text());
                        }
                    });
                    $(this).closest('.slds-dueling-list').find('[id$=ihPolicyIdentifiers]').val(selectedPI);
                    isAnyValueChanged = true;
                    return false;
                });
                $(document).on('click', '.btnPILeft', function(){
                    var piUnSelected = $(this).closest('.slds-dueling-list').find('.pi_unselected');
                    $(this).closest('.slds-dueling-list').find('.pi_right').find('ul').find('li.selected').each(function(){
                        $(this).removeClass('selected');
                        piUnSelected.append($(this));
                        piUnSelected.find('li').sort(function (a, b) {
                            return ($(b).text().toUpperCase()) < ($(a).text().toUpperCase()) ? 1 : -1;
                        }).appendTo(piUnSelected);
                    });
                    //set value
                    var selectedPI = '';
                    $(this).closest('.slds-dueling-list').find('.pi_selected').find('li').each(function(){
                        if(selectedPI != null && selectedPI.length > 0) {
                            selectedPI += '; ' + $.trim($(this).text());
                        } else {
                            selectedPI += $.trim($(this).text());
                        }
                    });
                    $(this).closest('.slds-dueling-list').find('[id$=ihPolicyIdentifiers]').val(selectedPI);
                    isAnyValueChanged = true;
                    return false;
                });
                
                $(document).on('click','.slds-listbox__item', function(){
                    if($(this).hasClass('selected')){
                        $(this).removeClass('selected');
                    } else {
                        $(this).addClass('selected'); 
                    }  
                });
                
                $(document).on('dblclick','.slds-listbox__item', function(){
                    var selectedUL = $(this).closest('ul');
                    var thisval = $(this);
                    if(selectedUL.hasClass("pi_unselected")){
                        var piSelected = $(this).closest('.slds-dueling-list').find('.pi_selected');
                        piSelected.append($(this));
                        piSelected.find('li').sort(function (a, b) {
                            return ($(b).text().toUpperCase()) < ($(a).text().toUpperCase()) ? 1 : -1;
                        }).appendTo(piSelected);
                    }
                    if(selectedUL.hasClass("pi_selected")){
                        var piUnSelected = $(this).closest('.slds-dueling-list').find('.pi_unselected');
                        piUnSelected.append($(this));
                        piUnSelected.find('li').sort(function (a, b) {
                            return ($(b).text().toUpperCase()) < ($(a).text().toUpperCase()) ? 1 : -1;
                        }).appendTo(piUnSelected);
                        
                    }
                    //set value
                    var selectedPI = '';
                    $(this).closest('.slds-dueling-list').find('.pi_selected').find('li').each(function(){
                        if(selectedPI != null && selectedPI.length > 0) {
                            selectedPI += '; ' + $.trim($(this).text());
                        } else {
                            selectedPI += $.trim($(this).text());
                        }
                    });
                    $(this).closest('.slds-dueling-list').find('[id$=ihPolicyIdentifiers]').val(selectedPI);
                });
                
                $(document).ready(function(){
                    $('.btnTempClickLeftclass').trigger('click');
                    overridePageMessages();
                });
                        
                function overridePageMessages(){    
                    var textureEffect = '';
                    //Uncomment below line for texture effect on page messages
                    textureEffect = 'slds-theme--alert-texture';
                                 
                    $('.warningM3').addClass('slds-notify slds-notify--toast slds-theme--warning customMessage '+textureEffect);          
                    $('.confirmM3').addClass('slds-notify slds-notify--alert slds-theme--success  customMessage '+textureEffect);    
                    $('.errorM3').addClass('slds-notify slds-notify--alert slds-theme--error customMessage '+textureEffect);                  
                    $('.infoM3').addClass('slds-notify slds-notify--toast customMessage '+textureEffect);    
                                     
                    $('.errorM3').removeClass('errorM3'); 
                    $('.confirmM3').removeClass('confirmM3'); 
                    $('.infoM3').removeClass('infoM3');   
                    $('.warningM3').removeClass('warningM3'); 
                    $('.btnTempClickLeftclass').trigger('click'); 
                }
            </script>
        </body>
        <!------------- Start: Processing Div---------------------------------------->
        <style>
            .msgIcon {
                display: none!important
            }
            .messageCell {
                width:100%;
            }
            .customMessage * {
                color: #fff!important
            }
            .customMessage {
                margin: 5px 0!important;
                opacity: 1!important;
                width: 100%;
                //font-size: 12px;
                border: 0px;
                padding-left: 10px;
            }
            .ProcessingBackground {
                background-color: #fff;
                opacity: 0.60;
                filter: alpha(opacity = 50);
                width: 100%;
                height: 100%;
                position: fixed;
                z-index: 9998;
                top:0;
                left:0;
            }
            .Processing {
                z-index: 9999;
                left: 47.5%;
                top: 50%;
                text-align: center;
                position: fixed;
            }
            .CPCPSMessageWarning {
                color:red;
            }
    
        </style>
        <div id="divProcessing" style="display:none;">
            <div class="ProcessingBackground"></div>
            <div class="Processing">    
                <div class="slds-spinner_container">
                    <div role="status" class="slds-spinner slds-spinner_medium slds-spinner_brand">
                        <span class="slds-assistive-text">Loading</span>
                        <div class="slds-spinner__dot-a"></div>
                        <div class="slds-spinner__dot-b"></div>
                    </div>
                </div> 
            </div>
            <apex:actionStatus id="Processing" onstart="document.getElementById('divProcessing').style.display = '';" onstop="document.getElementById('divProcessing').style.display = 'none';" />                            

        </div>  
        <!------------- End: Processing Div---------------------------------------->
    </html>
</apex:page>