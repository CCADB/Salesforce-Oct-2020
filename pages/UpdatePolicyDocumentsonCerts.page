<!--Page is developed to use for adding multiple Policy documents. -->
<apex:page sideBar="false" docType="html-5.0" controller="UpdatePolicyDocumentsonCertsController">
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <apex:slds />    
        <meta http-equiv="x-ua-compatible" content="ie=edge"/>    
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <script src="//code.jquery.com/jquery-3.3.1.js"></script>
        <style>
            table { 
                table-layout:fixed; 
            }
            table td, table th {
                word-wrap:break-word !important;
                white-space:normal !important;
            }
            .slds-scope .slds-section__content table thead th {
                color: rgb(81, 79, 77);
                font-weight: 700;
                line-height: normal;
                background-color: rgb(250, 250, 249);
                font-size:14px;
            }
            .slds-scope .slds-table_cell-buffer tr>th:first-child, .slds-scope .slds-table_cell-buffer tr>td:first-child {
                padding: 0.5rem !important;
            }
            .slds {
                padding: 10px;
            }
            <!--this CSS is applied for site-->
            .slds-scope .slds-page-header {
                padding: 1rem 1rem;
                border-bottom: 1px solid rgb(221, 219, 218);
                border-radius: 0 !important;
                background: rgb(243, 242, 242);
                background-clip: border-box !important; 
                box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.10);
                border: 1px solid rgb(221, 219, 218)
            }
            .slds-scope .slds-table thead th {
                background-color: rgb(250, 250, 249);
                color: rgb(81, 79, 77);
                padding: .25rem .5rem;
                font-weight: 700;
                line-height: normal;
            }
            .slds-scope .slds-page-header__title {
                font-size: 1.125rem;
                font-weight: 700;
                line-height: 1.25;
                display: block;
            }
            .slds-scope .slds-section__title {
                border-radius: 0 !important;
                font-weight:700;
            }
            .slds-scope .slds-theme_shade, .slds-scope .slds-theme--shade {
                background-color: rgb(243, 242, 242);
            }
            .dateFormat {
                display:none;
            }
            .datePicker {
                max-width:15%;
            }
            .clsMultiPicklist select {
                width:200px !important;
                height:100px !important;
            }
            .clsPIMultiPicklist select {
                width:200px !important;
                height:265px !important;
            }
            .slds-scope .slds-dueling-list__column_responsive {
                flex-wrap: nowrap;
            }
        </style>
        <body>
            <!--<hr style="margin:0px;border-top: 2px solid black;"/>-->
            <apex:form id="frm">
                <div class="slds">
                    <div class="slds-grid slds-gutters">
                        <div class="slds-col slds-size_1-of-1">
                            <div class="slds-page-header">
                                <div class="slds-grid">
                                    <div class="slds-col slds-has-flexi-truncate" style="padding-left:0px;">
                                        <div class="slds-media slds-no-space slds-grow">
                                            <div class="slds-media__figure">
                                                <!-- <svg class="slds-icon slds-icon-standard-report" aria-hidden="true">
                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/standard-sprite/svg/symbols.svg#report")}"></use>
                                                </svg> -->
                                                <apex:image value="{!$Resource.CCADB}" width="150" height="80"/>
                                            </div>
                                            <div class="slds-media__body" style="margin-top: 8px;">
                                                <p class="slds-text-title--caps slds-line-height--reset">Add Policy Documents</p>
                                                <h1 class="slds-page-header__title slds-m-right--small slds-align-middle">{!objAccount.Name}</h1>
                                            </div>              
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!--Body-->
                            <div id="mainbody" style="margin-top:25px;">
                                <apex:outputPanel layout="block" styleClass="slds-section slds-is-open">
                                    <h3 class="slds-section__title slds-theme_shade" style="color: black;font-size:14px;">
                                        <!--<span class="slds-icon_container slds-icon__svg--default clsExpandCollapse slds-custom-right" style="margin-left:5px;cursor:pointer;">
                                            <svg class="slds-icon slds-icon-text-default" aria-hidden="true" style="width:1.2rem;fill:black;">
                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#chevronright")}"></use>
                                            </svg>
                                        </span>-->
                                        <span style="padding-left:10px;">Policy Information</span>
                                    </h3>
                                    <div aria-hidden="false" class="slds-section__content">
                                        <div class="slds-form" role="list">
                                            <div class="slds-form__row">
                                                <div class="slds-form__item" role="listitem">
                                                    <div class="slds-form-element slds-form-element_horizontal">
                                                        <span class="slds-form-element__label">CA Document Repository</span>
                                                        <div class="slds-form-element__control" style="padding-left:17%;">
                                                            <apex:inputField value="{!objAccount.CA_Document_Repository__c}" styleClass="slds-textarea"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="slds-form__row">
                                                <div class="slds-form__item" role="listitem">
                                                    <div class="slds-form-element slds-form-element_horizontal">
                                                        <span class="slds-form-element__label">Policy Documentation</span>
                                                        <div class="slds-form-element__control" style="padding-left:17%;">
                                                            <apex:inputField value="{!objAccount.Policy_Documentation__c}" styleClass="slds-textarea"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>                   
                                </apex:outputPanel>
                                
                                <apex:outputPanel layout="block" styleClass="slds-section slds-is-open">
                                    <h3 class="slds-section__title slds-theme_shade" style="color: black;font-size:14px;">
                                        <!--<span class="slds-icon_container slds-icon__svg--default clsExpandCollapse slds-custom-right" style="margin-left:5px;cursor:pointer;">
                                            <svg class="slds-icon slds-icon-text-default" aria-hidden="true" style="width:1.2rem;fill:black;">
                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#chevronright")}"></use>
                                            </svg>
                                        </span>-->
                                        <span style="padding-left:10px;">Policy Documents</span>
                                    </h3>
                                    <div aria-hidden="false" class="slds-section__content">
                                    </div>
                                <center>
                                    <apex:commandButton value="Save" reRender="frm" action="{!SaveChanges}" styleClass="slds-button slds-button_brand" oncomplete="overridePageMessages();" status="Processing"/>
                                    <apex:commandButton value="Go Back" onclick="return CancelRoot();"  action="{!BackToRecord}" styleClass="slds-button slds-button_outline-brand"/>
                                    <button value="Help" class="slds-button slds-button_brand btnHelp">Help</button>
                                </center>
                                <apex:pageMessages ></apex:pageMessages>                                       
                                </apex:outputPanel>
                                <apex:repeat value="{!lstwrapAdditionalPolicyDocs}" var="addPolicy">
                                    <apex:outputPanel layout="block" styleClass="slds-section slds-is-open" style="margin-left:20px;margin-right:20px;">
                                        <h3 class="slds-section__title slds-theme_shade" style="color: black;font-size:14px;background-color:lightgray;">
                                            <!--<span class="slds-icon_container slds-icon__svg--default clsExpandCollapse slds-custom-right" style="margin-left:5px;cursor:pointer;">
                                                <svg class="slds-icon slds-icon-text-default" aria-hidden="true" style="width:1.2rem;fill:black;">
                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#chevronright")}"></use>
                                                </svg>
                                            </span>-->
                                            <span style="padding-left:10px;">Doc Id - {!if(addPolicy.additionalPolicyDoc.Id != null, addPolicy.additionalPolicyDoc.Name, 'New')}</span>
                                        </h3>
                                        <div aria-hidden="false" class="slds-section__content">
                                            <div class="slds-grid">
                                                <div class="slds-col slds-size_1-of-2">
                                                    <div class="slds-form" role="list">
                                                        <div class="slds-form__row">
                                                            <div class="slds-form__item" role="listitem">
                                                                <div class="slds-form-element slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">Document Type</span>
                                                                    <!--<div class="slds-form-element__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                                        <a href="javascript:void(0);" class="helplink">
                                                                            <svg class="slds-icon slds-icon--x-small slds-icon-text-default" aria-hidden="true">
                                                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#info")}"></use>
                                                                            </svg>
                                                                            <span class="slds-assistive-text">Help</span>
                                                                        </a>
                                                                    </div>-->
                                                                    <div class="slds-form-element__control">
                                                                        <apex:inputField value="{!addPolicy.additionalPolicyDoc.Document_Type__c}" styleClass="slds-select"/>
                                                                    </div>
                                                                    <div class="help slds-popover slds-popover--tooltip slds-nubbin--bottom-left" role="tooltip" aria-live="polite" style="position:absolute;top:-40px;left:84px;width:20rem;display:none;">
                                                                        <div class="slds-popover__body slds-text-longform">
                                                                            <p>{!$ObjectType.Policy_Document_On_Case__c.fields.Document_Type__c.InlineHelpText}</p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-form__row">
                                                            <div class="slds-form__item" role="listitem">
                                                                <div class="slds-form-element slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">Document Link</span>
                                                                    <div class="slds-form-element__control">
                                                                        <apex:inputField value="{!addPolicy.additionalPolicyDoc.Document_Link__c}" styleClass="slds-textarea"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                        </div>
                                                        <div class="slds-form__row">
                                                            <div class="slds-form__item" role="listitem">
                                                                <div class="slds-form-element slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">Document Last Update Date</span>
                                                                    <div class="slds-form-element__control">
                                                                        <apex:inputField value="{!addPolicy.additionalPolicyDoc.Document_Last_Updated_Date__c}" styleClass="slds-input"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-form__row">
                                                            <div class="slds-form__item" role="listitem">
                                                                <div class="slds-form-element slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">Associated Trust Bits</span>
                                                                    <div class="slds-form-element__control">
                                                                        <apex:outputPanel layout="block" id="divTrustBitsMultiPicklist" styleClass="clsMultiPicklist">
                                                                            <div class="slds-picklist--draggable slds-grid" id="divTrustBitsWrapper" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
                                                                                <table style="border-spacing:0px !important;border:none;">
                                                                                    <tr>
                                                                                        <td style="border:none;width:45%;">
                                                                                            <apex:outputPanel layout="block" styleClass="slds-form-element__control" id="divTrustBitsLeft">
                                                                                            </apex:outputPanel>
                                                                                        </td>
                                                                                        <td style="border:none;width:10%;">
                                                                                            <div layout="block" class="slds-grid slds-grid--vertical" id="divTrustBitsButtons">
                                                                                                <button class="slds-button slds-button--icon-container btnTempClickRightclass" style="margin-top:0px;" data-pickid="{!$Component.TrustBitsPicklist}">
                                                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#right')}"></use>
                                                                                                    </svg>
                                                                                                    <span class="slds-assistive-text">Arrow up</span>
                                                                                                </button>
                                                                                                <button class="slds-button slds-button--icon-container btnTempClickLeftclass" data-pickid="{!$Component.TrustBitsPicklist}">
                                                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#left')}"></use>
                                                                                                    </svg>
                                                                                                    <span class="slds-assistive-text">Arrow down</span>
                                                                                                </button>
                                                                                            </div>
                                                                                        </td>
                                                                                        <td style="border:none;width:45%;">
                                                                                            <apex:outputPanel layout="block" styleClass="slds-form-element__control" id="divTrustBitsRight">
                                                                                            </apex:outputPanel>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                            </div>
                                                            
                                                                            <apex:outputPanel layout="block" styleClass="slds-form-element__control" id="divTrustBitsCWrapper">
                                                                                <apex:inputField id="TrustBitsPicklist"  value="{!addPolicy.additionalPolicyDoc.Associated_Trust_Bits__c}" styleclass="slds-select"/>
                                                                            </apex:outputPanel>
                                                            
                                                                            <script type="text/javascript">
                                                                                var divSelWrapper = document.getElementById("{!$Component.divTrustBitsCWrapper}");
                                                                                var selList = divSelWrapper.getElementsByTagName("select");
                                                                                var selId = selList[0].id;
                                                            
                                                            
                                                                                var selLeft = selList[1];
                                                                                var selRight = selList[2];
                                                                                // Re-parent select controls for LEX support
                                                                                document.getElementById("{!$Component.divTrustBitsLeft}").appendChild(selLeft);
                                                                                document.getElementById("{!$Component.divTrustBitsRight}").appendChild(selRight);
                                                            
                                                                                // Take away the "optgroup" because the VF render issue
                                                                                selLeft.innerHTML = selLeft.getElementsByTagName("optgroup")[0].innerHTML;
                                                                                selRight.innerHTML = selRight.getElementsByTagName("optgroup")[0].innerHTML;
                                                            
                                                                                // Remove unused HTML elments
                                                                                divSelWrapper.removeChild(divSelWrapper.getElementsByTagName("table")[0]);
                                                            
                                                                            </script>
                                                                        </apex:outputPanel>
                                                                        <!--<apex:inputField value="{!addPolicy.additionalPolicyDoc.Associated_Trust_Bits__c}" styleClass="slds-input"/>-->
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                        </div>
                                                        <div class="slds-form__row">
                                                            <div class="slds-form__item" role="listitem">
                                                                <div class="slds-form-element slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">Comments</span>
                                                                    <div class="slds-form-element__control">
                                                                        <apex:inputField value="{!addPolicy.additionalPolicyDoc.Comments__c}" styleClass="slds-textarea"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="slds-col slds-size_1-of-2">
                                                    <div class="slds-form" role="list">
                                                        <div class="slds-form__row">
                                                            <div class="slds-form__item" role="listitem">
                                                                <div class="slds-form-element slds-form-element_horizontal">
                                                                    <span class="slds-form-element__label">
                                                                        Policy Identifiers
                                                                    </span>
                                                                    <div class="slds-form-element__control" style="padding-left:22%;">
                                                                        <div class="slds-dueling-list" style="height:21.9rem;">
                                                                            <div class="slds-dueling-list__column slds-dueling-list__column_responsive pi_left">
                                                                                <span class="slds-form-element__label">Available</span>
                                                                                <div class="slds-dueling-list__options" style="height:21.5rem;">
                                                                                    <ul aria-describedby="option-drag-label" aria-multiselectable="true" class="slds-listbox slds-listbox_vertical pi_unselected" role="listbox">
                                                                                        <apex:repeat value="{!lstPolicyIdentifiers}" var="PI">
                                                                                            <apex:variable value="{!0}" var="isExist"/>
                                                                                            <apex:repeat value="{!addPolicy.lstdocPolicyIdentifiers}" var="DocPI">
                                                                                                <apex:variable value="{!isExist+1}" var="isExist" rendered="{!DocPI == PI}"/>
                                                                                            </apex:repeat>
                                                                                            <li role="presentation" class="slds-listbox__item" value="{!PI}" style="display:{!if(isExist==0, '','none')}">
                                                                                                <div class="slds-listbox__option slds-listbox__option_plain slds-media slds-media_small slds-media_inline" aria-selected="false" draggable="true" role="option" tabindex="0">
                                                                                                    <span class="slds-media__body">
                                                                                                        <span class="slds-truncate" title="{!PI}">{!PI}</span>
                                                                                                    </span>
                                                                                                </div>
                                                                                            </li>
                                                                                        </apex:repeat>
                                                                                    </ul>
                                                                                </div>
                                                                            </div>
                                                                            <div class="slds-dueling-list__column">
                                                                                <button class="slds-button slds-button_icon slds-button_icon-container btnPIRight" style="margin-top:8.5rem;">
                                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#right')}"></use>
                                                                                    </svg>
                                                                                    <span class="slds-assistive-text"></span>
                                                                                </button>
                                                                                <button class="slds-button slds-button_icon slds-button_icon-container btnPILeft">
                                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#left')}"></use>
                                                                                    </svg>
                                                                                    <span class="slds-assistive-text"></span>
                                                                                </button>
                                                                            </div>
                                                                            <div class="slds-dueling-list__column slds-dueling-list__column_responsive pi_right">
                                                                                <span class="slds-form-element__label">Selected</span>
                                                                                <div class="slds-dueling-list__options" style="height:21.5rem;">
                                                                                    <apex:inputHidden value="{!addPolicy.additionalPolicyDoc.Policy_Identifiers__c}" id="ihPolicyIdentifiers"/>
                                                                                    <ul aria-describedby="option-drag-label" aria-multiselectable="true" class="slds-listbox slds-listbox_vertical pi_selected" role="listbox">
                                                                                        <apex:repeat value="{!addPolicy.lstdocPolicyIdentifiers}" var="PI">
                                                                                            <li role="presentation" class="slds-listbox__item" value="{!PI}">
                                                                                                <div class="slds-listbox__option slds-listbox__option_plain slds-media slds-media_small slds-media_inline" aria-selected="false" draggable="true" role="option" tabindex="0">
                                                                                                    <span class="slds-media__body">
                                                                                                        <span class="slds-truncate" title="{!PI}">{!PI}</span>
                                                                                                    </span>
                                                                                                </div>
                                                                                            </li>
                                                                                        </apex:repeat>
                                                                                    </ul>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <apex:outputPanel layout="block" styleClass="slds-section slds-is-close" style="margin-left:10px;margin-right:10px;">
                                                <h3 class="slds-section__title slds-theme_shade" style="color: black;font-size:14px;">
                                                    <span class="slds-icon_container slds-icon__svg--default clsExpandCollapse slds-custom-right" style="margin-left:5px;cursor:pointer;">
                                                        <svg class="slds-icon slds-icon-text-default" aria-hidden="true" style="width:1.2rem;fill:black;">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#chevronright")}"></use>
                                                        </svg>
                                                    </span>
                                                    <span>Select applicable root certificates (Count of previously selected and saved root certificates: {!addPolicy.countRootCerts})</span>
                                                </h3>
                                                <div aria-hidden="false" class="slds-section__content slds-hide">
                                                    <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_col-bordered">
                                                        <thead>
                                                            <tr class="slds-line-height_reset">
                                                                <th width="5%" scope="col" style="border-left: 1px solid rgb(221, 219, 218);text-align:center;">
                                                                    <div class="slds-checkbox">
                                                                        <apex:inputCheckbox id="chkSelectAll" styleClass="clsSelectAll"/>
                                                                        <label class="slds-checkbox__label" for="{!$Component.chkSelectAll}">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span class="slds-form-element__label"></span>
                                                                        </label>
                                                                    </div>
                                                                </th>
                                                                <th width="20%" scope="col">
                                                                    <div  title="Root Certificate Name">Root Certificate Name</div>
                                                                </th>
                                                                <!-- <th width="10%" scope="col">
                                                                    <div  title="Revocation Status">Revocation Status</div>
                                                                </th> -->
                                                                <th width="10%" scope="col">
                                                                    <div  title="Mozilla Status">Mozilla Status</div>
                                                                </th>
                                                                <th width="10%" scope="col">
                                                                    <div  title="Microsoft Status">Microsoft Status</div>
                                                                </th>
                                                                <th width="10%" scope="col">
                                                                    <div  title="Valid From (GMT)">Valid From (GMT)</div>
                                                                </th>
                                                                <th width="10%" scope="col">
                                                                    <div  title="Valid To (GMT)">Valid To (GMT)</div>
                                                                </th>
                                                                <th width="25%" scope="col" style="border-right: 1px solid rgb(221, 219, 218);">
                                                                    <div  title="SHA 256 Fingerprint">SHA 256 Fingerprint</div>
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <apex:repeat value="{!addPolicy.lstApplyPolicyDocs}" var="applyPolicy">
                                                                <tr class="dataRow">
                                                                    <td style="border-left: 1px solid rgb(221, 219, 218);text-align:center;">
                                                                        <div class="slds-checkbox">
                                                                            <apex:inputCheckbox id="chkApplyPolicy" value="{!applyPolicy.isSelected}"/>
                                                                            <label class="slds-checkbox__label" for="{!$Component.chkApplyPolicy}">
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-form-element__label"></span>
                                                                            </label>
                                                                        </div>
                                                                    </td>
                                                                    <td class="datacell">
                                                                        <apex:outputField value="{!applyPolicy.objAcc.Name}"/>
                                                                    </td>
                                                                    <!-- <td class="datacell">
                                                                        <apex:outputField value="{!applyPolicy.objAcc.Revocation_Status__c}"/>
                                                                    </td> -->
                                                                    <td class="datacell">
                                                                        <apex:outputField value="{!applyPolicy.objAcc.Status__c}"/>
                                                                    </td>
                                                                    <td class="datacell">
                                                                        <apex:outputField value="{!applyPolicy.objAcc.Microsoft_Status__c}"/>
                                                                    </td>
                                                                    <td class="datacell">
                                                                        <apex:outputField value="{!applyPolicy.objAcc.Valid_From_GMT__c}"/>
                                                                    </td>
                                                                    <td class="datacell">
                                                                        <apex:outputField value="{!applyPolicy.objAcc.Valid_To_GMT__c}"/>
                                                                    </td>
                                                                    <td class="datacell" style="border-right: 1px solid rgb(221, 219, 218);">
                                                                        <apex:outputField value="{!applyPolicy.objAcc.SHA_256_Fingerprint__c}"/>
                                                                    </td>
                                                                </tr>
                                                            </apex:repeat>
                                                            <!--<tr style="display:{!if(lstOutDatedRootCerts == null || lstOutDatedRootCerts.size == 0,'','none')}">
                                                                <td colspan="6" style="border-left: 1px solid rgb(221, 219, 218);border-right: 1px solid rgb(221, 219, 218);">
                                                                    No records to display.
                                                                </td>
                                                            </tr>-->
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </apex:outputPanel>
                                        </div>
                                    </apex:outputPanel>
                                </apex:repeat>
                                <center>
                                    <apex:commandButton value="Save" action="{!SaveChanges}" reRender="frm" styleClass="slds-button slds-button_brand" oncomplete="overridePageMessages();" status="Processing"/>
                                    <apex:commandButton value="Go Back" onclick="return CancelRoot();" action="{!BackToRecord}" styleClass="slds-button slds-button_outline-brand"/>
                                    <button value="Help" class="slds-button slds-button_brand btnHelp">Help</button>
                                </center>
                            </div>
                        </div>
                    </div>
                    <!-- model popup-->
                    <div id="divHelpBox" style="display:none">
                        <section role="dialog" aria-modal="true" class="slds-modal slds-fade-in-open">
                            <div class="slds-modal__container">
                                <header class="slds-modal__header">
                                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse btnHelpClose" title="Close">
                                        <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#close")}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Close</span>
                                    </button>
                                    <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Help</h2>
                                </header>
                                <div class="slds-modal__content slds-p-around_medium">
                                    -----Add HELP TEXT HERE-----
                                </div>
                                <footer class="slds-modal__footer">
                                    <button class="slds-button slds-button_neutral btnHelpClose">Close</button>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </div>
                </div>
                <script>
                    var isAnyValueChanged = false;
                </script>
            </apex:form>
            <script>
                $(document).ready(function(){
                    overridePageMessages();   
                });
                $(document).on("change", "input, select, textarea", function () {
                    isAnyValueChanged = true;
                });
                function CancelRoot(){
                    if(isAnyValueChanged){
                        if(confirm('Changes will be lost which you made, Are you sure to proceed?')){
                            return true;
                        } else {
                            return false;
                        }
                    }
                    return true;
                }
                $(document).on('mouseenter','.helplink',function(){
                    $(this).closest('div.slds-form-element').find('div.help').show();
                });
                $(document).on('mouseleave','.helplink',function(){
                    $(this).closest('div.slds-form-element').find('div.help').hide();
                });
                $(document).on('click','.btnHelp',function(){
                    $('#divHelpBox').show();
                    return false;
                });
                $(document).on('click','.btnHelpClose',function(){
                    $('#divHelpBox').hide();
                    return false;
                });
                
                $(document).on('click','.clsSelectAll',function(e){
                    $(this).closest('table').find('tbody').find('td input:checkbox').prop('checked', this.checked);
                });
                $(document).on('click','.clsExpandCollapse',function(){
                    var downarrow = '<svg class="slds-icon slds-icon-text-default" aria-hidden="true" style="width:1.2rem;fill:black;margin-right:3px;">\
                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#chevrondown")}"></use> \
                                            </svg>';
                    var rightarrow = '<svg class="slds-icon slds-icon-text-default" aria-hidden="true" style="width:1.2rem;fill:black;">\
                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, "/assets/icons/utility-sprite/svg/symbols.svg#chevronright")}"></use> \
                                            </svg>';
                    
                    var selected = false;
                    if($(this).hasClass('slds-custom-down')){
                        selected = true;
                    }
                    if(selected == false){
                        $(this).removeClass('slds-custom-right').addClass('slds-custom-down');
                        $(this).html('');
                        $(this).html(downarrow);
                        $(this).closest('div.slds-section').removeClass('slds-is-close').addClass('slds-is-open');
                        $(this).closest('div.slds-section').find('div.slds-section__content').removeClass('slds-hide').addClass('slds-show');
                    } else {
                        $(this).removeClass('slds-custom-down').addClass('slds-custom-right');
                        $(this).html('');
                        $(this).html(rightarrow);
                        $(this).closest('div.slds-section').removeClass('slds-is-open').addClass('slds-is-close');
                        $(this).closest('div.slds-section').find('div.slds-section__content').removeClass('slds-show').addClass('slds-hide');
                    }
                });
                $(document).on('click', '.btnTempClickRightclass', function(){
                    var tmpid = $(this).attr('data-pickid');
                    MultiSelectPicklist.handleMSPSelect(tmpid);
                    return false;
                });
                
                $(document).on('click', '.btnTempClickLeftclass', function(){
                    var tmpid = $(this).attr('data-pickid');
                    MultiSelectPicklist.handleMSPUnSelect(tmpid);
                    return false;
                });
                
                $(document).on('click', '.btnPIRight', function(){
                    var piSelected = $(this).closest('.slds-dueling-list').find('.pi_selected');
                    $(this).closest('.slds-dueling-list').find('.pi_left').find('ul').find('li.selected').each(function(){
                        piSelected.append($(this));
                        piSelected.find('li').sort(function (a, b) {
                            return ($(b).text().toUpperCase()) < ($(a).text().toUpperCase()) ? 1 : -1;
                        }).appendTo(piSelected);
                    });
                    //set value
                    var selectedPI = '';
                    $(this).closest('.slds-dueling-list').find('.pi_selected').find('li').each(function(){
                        if(selectedPI != null && selectedPI.length > 0) {
                            selectedPI += '; ' + $.trim($(this).text());
                        } else {
                            selectedPI += $.trim($(this).text());
                        }
                    });
                    $(this).closest('.slds-dueling-list').find('[id$=ihPolicyIdentifiers]').val(selectedPI);
                    return false;
                });
                $(document).on('click', '.btnPILeft', function(){
                    var piUnSelected = $(this).closest('.slds-dueling-list').find('.pi_unselected');
                    $(this).closest('.slds-dueling-list').find('.pi_right').find('ul').find('li.selected').each(function(){
                        piUnSelected.append($(this));
                        piUnSelected.find('li').sort(function (a, b) {
                            return ($(b).text().toUpperCase()) < ($(a).text().toUpperCase()) ? 1 : -1;
                        }).appendTo(piUnSelected);
                    });
                    //set value
                    var selectedPI = '';
                    $(this).closest('.slds-dueling-list').find('.pi_selected').find('li').each(function(){
                        if(selectedPI != null && selectedPI.length > 0) {
                            selectedPI += '; ' + $.trim($(this).text());
                        } else {
                            selectedPI += $.trim($(this).text());
                        }
                    });
                    $(this).closest('.slds-dueling-list').find('[id$=ihPolicyIdentifiers]').val(selectedPI);
                    return false;
                });
                
                $(document).on('click','.slds-listbox__item', function(){
                    $(this).closest('ul').find('li.selected').each(function(){
                        $(this).removeClass('selected');
                    });
                    $(this).addClass('selected');   
                });
                
                $(document).on('dblclick','.slds-listbox__item', function(){
                    var selectedUL = $(this).closest('ul');
                    var thisval = $(this);
                    if(selectedUL.hasClass("pi_unselected")){
                        var piSelected = $(this).closest('.slds-dueling-list').find('.pi_selected');
                        piSelected.append($(this));
                        piSelected.find('li').sort(function (a, b) {
                            return ($(b).text().toUpperCase()) < ($(a).text().toUpperCase()) ? 1 : -1;
                        }).appendTo(piSelected);
                    }
                    if(selectedUL.hasClass("pi_selected")){
                        var piUnSelected = $(this).closest('.slds-dueling-list').find('.pi_unselected');
                        piUnSelected.append($(this));
                        piUnSelected.find('li').sort(function (a, b) {
                            return ($(b).text().toUpperCase()) < ($(a).text().toUpperCase()) ? 1 : -1;
                        }).appendTo(piUnSelected);
                        
                    }
                    //set value
                    var selectedPI = '';
                    $(this).closest('.slds-dueling-list').find('.pi_selected').find('li').each(function(){
                        if(selectedPI != null && selectedPI.length > 0) {
                            selectedPI += '; ' + $.trim($(this).text());
                        } else {
                            selectedPI += $.trim($(this).text());
                        }
                    });
                    $(this).closest('.slds-dueling-list').find('[id$=ihPolicyIdentifiers]').val(selectedPI);
                });
                
                $(document).ready(function(){
                    $('.btnTempClickLeftclass').trigger('click');
                });
                        
                function overridePageMessages(){    
                    var textureEffect = '';
                    //Uncomment below line for texture effect on page messages
                    textureEffect = 'slds-theme--alert-texture';
                                 
                    $('.warningM3').addClass('slds-notify slds-notify--toast slds-theme--warning customMessage '+textureEffect);          
                    $('.confirmM3').addClass('slds-notify slds-notify--alert slds-theme--success  customMessage '+textureEffect);    
                    $('.errorM3').addClass('slds-notify slds-notify--alert slds-theme--error customMessage '+textureEffect);                  
                    $('.infoM3').addClass('slds-notify slds-notify--toast customMessage '+textureEffect);    
                                     
                    $('.errorM3').removeClass('errorM3'); 
                    $('.confirmM3').removeClass('confirmM3'); 
                    $('.infoM3').removeClass('infoM3');   
                    $('.warningM3').removeClass('warningM3'); 
                    $('.btnTempClickLeftclass').trigger('click'); 
                }
            </script>
        </body>
        <!------------- Start: Processing Div---------------------------------------->
        <style>
            .msgIcon {
                display: none!important
            }
            .messageCell {
                width:100%;
            }
            .customMessage * {
                color: #fff!important
            }
            .customMessage {
                margin: 5px 0!important;
                opacity: 1!important;
                width: 100%;
                //font-size: 12px;
                border: 0px;
                padding-left: 10px;
            }
            .ProcessingBackground {
                background-color: #fff;
                opacity: 0.60;
                filter: alpha(opacity = 50);
                width: 100%;
                height: 100%;
                position: fixed;
                z-index: 9998;
                top:0;
                left:0;
            }
            .Processing {
                z-index: 9999;
                left: 47.5%;
                top: 50%;
                text-align: center;
                position: fixed;
            } 
    
        </style>
        <div id="divProcessing" style="display:none;">
            <div class="ProcessingBackground"></div>
            <div class="Processing">    
                <div class="slds-spinner_container">
                    <div role="status" class="slds-spinner slds-spinner_medium slds-spinner_brand">
                        <span class="slds-assistive-text">Loading</span>
                        <div class="slds-spinner__dot-a"></div>
                        <div class="slds-spinner__dot-b"></div>
                    </div>
                </div> 
            </div>
            <apex:actionStatus id="Processing" onstart="document.getElementById('divProcessing').style.display = '';" onstop="document.getElementById('divProcessing').style.display = 'none';" />                            

        </div>  
        <!------------- End: Processing Div---------------------------------------->
    </html>
</apex:page>